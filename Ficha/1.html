<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ficha Familiar</title>
    <!-- Reemplazar las l칤neas de script existentes -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <link rel="stylesheet" href="styles.css">
    <style>
        .upload-container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            border: 2px dashed #ccc;
            border-radius: 5px;
            text-align: center;
        }
        .preview-container {
            margin-top: 20px;
            display: none;
        }
        #imagePreview {
            max-width: 100%;
            max-height: 300px;
        }
    </style>
</head>
<body>
    <header class="headerMod">
        <img src="logo.png" alt="Logo" class="logo">
        <h1>Ficha de salud Familiar Cesfam Los 츼lamos <img src="logocesfam.png" alt="logoCesfam" style="width:100px; height:100px;"></h1>
        <div>
        Powered by E.U Hernando Gayoso Navarrete.
  <div>
  <a href="https://nanox21.github.io/ECICEPFINAL/" target="_blank">
    <img src="calculadoraecicep.png" alt="Calculadora ECICEP" title="Calculadora ECICEP 游빑"
         class="zoom-hover">
  </a>

  <style>
    /* Estilo para aplicar zoom al pasar el mouse sobre la imagen dentro del enlace */
    .zoom-hover {
      width: 100px;
      height: 100px;
      object-fit: contain;
      transition: transform 0.3s ease;
    }

    .zoom-hover:hover {
      transform: scale(1.2);
      cursor: pointer;
    }
  </style>
</div>        <a href="mailto:nanox21@gmail.com" target="_blank">游닏Contacto</a>
        <br></div>
    
<div><p><b><u>Esta p치gina no guarda ni almacena datos, respetando confidencialidad de nuestro usuarios游땕</p></b></u></div>
    </header>
   

    <div class="container">
      
 <div class="container" style="margin: 0 auto; text-align: center; width: 50%;">
    <u><h2>Ficha Familiar</h2></u>
</div>

        <!-- Identificaci칩n -->
        <label for="sector">Sector:</label>
        <select id="sector" name="sector">
            <option value=" ingresar">selecciona sector</option>
            <option value="Azul (Tres Pinos)">Azul (Tres Pinos)</option>
            <option value="Azul (Antihuala)">Azul (Antihuala)</option>
            <option value="Rojo">Rojo</option>
            <option value="Amarillo">Amarillo</option>
            <option value="Verde (Urbano)">Verde (Urbano)</option>
            <option value="Verde (Pangue)">Verde (Pangue)</option>
            <option value="Verde (Ranquilco)">Verde (Ranquilco)</option>
        </select>
        <h3>Identificaci칩n</h3>
        <label for="nombre">Nombre:</label>
        <input type="text" id="nombre" style="width: 600px;">
        <br>
    
        <label for="edad">Edad:</label>
        <input type="number" id="edad" class="input-corto" min="0" max="130" style="width: 70px;">
        <br>
    
        <label for="direccion">Direcci칩n:</label>
        <input type="text" id="direccion" style="width: 600px;">
        <br>
    
        <label for="telefono">Tel칠fono:</label>
        <input type="text" id="telefono" style="width: 150px;">
        <br>
    
        <label for="fecha_aplicacion">Fecha de Aplicaci칩n:</label>
        <input type="date" id="fecha_aplicacion" name="fecha_aplicacion" class="input-fecha"> <!-- Acortar el input de fecha -->
        <br>
    
        <label for="fecha_actualizacion">Fecha de actualizaci칩n:</label>
        <input type="date" id="fecha_actualizacion" name="fecha_actualizacion" class="input-fecha"> <!-- Acortar el input de fecha -->
        <br>
    
        <label for="regsitroSocial">Registro social de hogares:</label>
        <input type="text" id="registroSocial" name="regsitroSocial" style="width: 200px;">
        <br>
    
        <label for="observaciones">Observaciones:</label>
        <textarea id="observaciones" name="observaciones" class="textarea-grande"></textarea> <!-- Ampliar el 치rea de observaciones -->
        <label for="instrumento">VDI Realizada por:</label>
        <textarea id="instrumento" name="instrumento" class="textarea-grande"></textarea> <!-- Ampliar el 치rea de observaciones -->
        <br>
        <br>
    </body>

        <!-- Tipos de Familia -->
        <h2>Tipo de Familia </h2>
        <select id="tiposDeFamilia" name="tiposDeFamilia">
            <option value=" ingresar">selecciona tipo de familia</option>
            <option value="nuclearSimple">Nuclear Simple</option>
            <option value="nuclearBiparental">Nuclear Biparental</option>
            <option value="familia">Familia Extensa</option>
            <option value="familiaCompuesta">Familia Compuesta</option>
            <option value="familiuaUnipersonal">Familia Unipersonal</option>
            <option value="nuclearReconstiuida">Familiar Nuclear Reconsituida</option>
        </select>
        <br>
        <br>

        <h2>Ciclo Vital Familiar</h2>
        <select id="cicloVitalFamiliar" name="cicloVitalFamiliar">
            <option value="ingresaCiclo">selecciona ciclo vital familiar</option>
            <option value="formacion">Fomraci칩n / Pareja</option>
            <option value="crianzaInicial">Crianza Inicial</option>
            <option value="conPreescolares">Con Hijos Preescolares</option>
            <option value="conEscolares">Con Hijos Escolares</option>
            <option value="plataforma">Plataforma de lazamiento</option>
            <option value="edadMedia">Edad Media</option>
            <option value="edadAnciana">Edad Anciana</option>
        </select>
        <br>
        <br>

        <!-- Factores Protectores -->
        <h2>Factores Protectores</h2>
        <div>
            <label>쮺uenta con trabajo estable?</label>
            <input type="radio" id="trabajo_si" name="trabajo_estable" value="S칤">
            <label for="trabajo_si">S칤</label>
            <input type="radio" id="trabajo_no" name="trabajo_estable" value="No">
            <label for="trabajo_no">No</label>
        </div>
        <div>
            <label>쮺uenta con vivienda adecuada?</label>
            <input type="radio" id="vivienda_si" name="vivienda_adecuada" value="S칤">
            <label for="vivienda_si">S칤</label>
            <input type="radio" id="vivienda_no" name="vivienda_adecuada" value="No">
            <label for="vivienda_no">No</label>
        </div>
        <div>
            <label>쯊iene cubiertas sus necesidades b치sicas?</label>
            <input type="radio" id="necesidades_si" name="necesidades_basicas" value="S칤">
            <label for="necesidades_si">S칤</label>
            <input type="radio" id="necesidades_no" name="necesidades_basicas" value="No">
            <label for="necesidades_no">No</label>
        </div>
        <div>
            <label>쯇osee vivienda propia?</label>
            <input type="radio" id="propia_si" name="vivienda_propia" value="S칤">
            <label for="propia_si">S칤</label>
            <input type="radio" id="propia_no" name="vivienda_propia" value="No">
            <label for="propia_no">No</label>
        </div>
        <div>
            <label>쯇articipa en grupos sociales?</label>
            <input type="radio" id="grupos_si" name="participacion_social" value="S칤">
            <label for="grupos_si">S칤</label>
            <input type="radio" id="grupos_no" name="participacion_social" value="No">
            <label for="grupos_no">No</label>
        </div>
        <div>
            <label>쮺uenta con comunicaci칩n funcional?</label>
            <input type="radio" id="comunicacion_si" name="comunicacion_funcional" value="S칤">
            <label for="comunicacion_si">S칤</label>
            <input type="radio" id="comunicacion_no" name="comunicacion_funcional" value="No">
            <label for="comunicacion_no">No</label>
        </div>
        <br>
        <br><br>
        <br>
 
        <!-- Factores de Riesgo -->
        <h2>Factores de Riesgo</h2>
        <h3>Riesgos psicosociales</h3>
        <div id="psicosocial-options">
            <label><input type="checkbox" class="risk" value="2"> Baja Escolaridad Madre</label><br>
            <label><input type="checkbox" class="risk" value="3"> Jefe Hogar Cesante</label><br>
            <label><input type="checkbox" class="risk" value="2"> Hacinamiento</label><br>
            <label><input type="checkbox" class="risk" value="2"> Adolescente Embarazada</label><br>
            <label><input type="checkbox" class="risk" value="1"> Deficiente V칤as de Comunicaci칩n</label><br>
            <label><input type="checkbox" class="risk" value="2"> VIF -Sexual</label><br>
            <label><input type="checkbox" class="risk" value="2"> Jefe de Hogar Solo</label><br>
            <label><input type="checkbox" class="risk" value="3"> Delincuencia</label><br>
            <label><input type="checkbox" class="risk" value="2"> Duelo Reciente</label><br>
            <label><input type="checkbox" class="risk" value="2"> Sin redes de apoyo</label><br>
            <label><input type="checkbox" class="risk" value="2"> Deserci칩n Escolar</label><br>
        </div>
        <br>
        <br>
        <h3>Riesgos Biom칠dico</h3>
        <div id="biomedico-options">
            <label><input type="checkbox" class="risk" value="1"> Ni침o con malnutrici칩n</label><br>
            <label><input type="checkbox" class="risk" value="2"> Ni침o con retraso DSM</label><br>
            <label><input type="checkbox" class="risk" value="3"> VIH-SIDA</label><br>
            <label><input type="checkbox" class="risk" value="2"> Adulto mayor con malnutrici칩n</label><br>
            <label><input type="checkbox" class="risk" value="1"> Patolog칤a Cr칩nica</label><br>
            <label><input type="checkbox" class="risk" value="3"> PAD y CP /CPU/ Dependencia Severa</label><br>
            <label><input type="checkbox" class="risk" value="2"> Patolog칤a de salud mental</label><br>
            <label><input type="checkbox" class="risk" value="3"> Consumo de drogas</label><br>
            <label><input type="checkbox" class="risk" value="2"> Embarazo no controlado</label><br>
            <label><input type="checkbox" class="risk" value="1"> Integrante con discapacidad certificada F칤sica</label><br>
            <label><input type="checkbox" class="risk" value="2"> Integrante con discapacidad certificada mental/intelectual</label><br>
            <label><input type="checkbox" class="risk" value="3"> Integrante con discapacidad certificada mental/ps칤quica</label><br>
            <label><input type="checkbox" class="risk" value="4"> Integrante con discapacidad certificada visual</label><br>
            <label><input type="checkbox" class="risk" value="5"> Integrante con discapacidad certificada Auditiva</label><br>
        </div>
        <br>
        <br>
        <h3>Riesgos Medioambientales</h3>
        <div id="medioambiental-options">
            <label><input type="checkbox" class="risk" value="2"> Sin agua potable</label><br>
            <label><input type="checkbox" class="risk" value="1"> Carencia de alcantarillado</label><br>
            <label><input type="checkbox" class="risk" value="2"> Mala calidad vivienda</label><br>
            <label><input type="checkbox" class="risk" value="1"> Vivienda en lugar de riesgo</label><br>
            <label><input type="checkbox" class="risk" value="1"> Extrema ruralidad</label><br>
        </div>
        <button class="btn" id="calcularRiesgoBtn">Calcular Riesgo</button>
        <button class="btn" id="limpiarFormularioBtn">Limpiar</button>

        <div id="resultado" class="result"></div>
        <br>
        <br>
        <h2>Tabla de Integrantes de la Familia</h2>
        <table id="familiaTable">
            <thead>
                <tr>
                    <th>RUN</th>
                    <th>Nombres</th>
                    <th>Apellido</th>
                    <th>Edad</th>
                    <th>F. Nacimiento</th>
                    <th>Parentesco</th>
                    <th>Estado Civil</th>
                    <th>Escolaridad</th>
                    <th>Previsi칩n</th>
                    <th>F. Riesgo</th>
                    <th>Participaci칩n Social</th>
                    <th>Ingresos</th>
               
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
        <button class="btn agregarFilaBtn" data-tabla="familiaTable" data-columnas="12">Agregar Fila</button>
        
        <script src="scripts.js"></script>

<!-- Plan de Trabajo -->
<h2>Plan de Trabajo</h2>
<table id="planTrabajo">
    <thead>
        <tr>
            <th>Fecha</th><th>Actividad</th><th>Objetivo</th><th>Dirigido A</th>
        </tr>
    </thead>
    <tbody>
    </tbody>
</table>
<button class="btn agregarFilaBtn" data-tabla="planTrabajo" data-columnas="4">Agregar Fila</button>
<button type="button" class="btn" id="generarPDFBtn">Generar Reporte PDF</button>

<button class="btn" id="limpiarFormularioBtn">Limpiar Formulario</button>

<div class="upload-container">
    <h2>Subir Genograma</h2>
    <form id="genogramForm">
        <input type="file" id="genogramFile" accept="image/*" required>
        <p>Arrastra una imagen o haz clic para seleccionar</p>
        <button type="button" id="previewGenogramBtn" class="btn">Previsualizar</button>
        <button type="button" id="clearGenogramBtn" class="btn">Eliminar genograma</button>
    </form>
    <div class="preview-container" id="previewContainer">
        <h3>Vista previa del genograma:</h3>
        <img id="imagePreview" src="" alt="Vista previa del genograma">
    </div>
</div>

<div class="upload-container">
    <h2>Subir Ecomapa</h2>
    <form id="ecomapaForm">
        <input type="file" id="ecomapaFile" accept="image/*" required>
        <p>Arrastra una imagen o haz clic para seleccionar</p>
        <button type="button" id="previewEcomapaBtn" class="btn">Previsualizar</button>
        <button type="button" id="clearEcomapaBtn" class="btn">Eliminar ecomapa</button>
    </form>
    <div class="preview-container" id="previewEcomapaContainer">
        <h3>Vista previa del ecomapa:</h3>
        <img id="ecomapaPreview" src="" alt="Vista previa del ecomapa">
    </div>
</div>

<script>
    document.getElementById('genogramFile').addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(event) {
                const previewContainer = document.getElementById('previewContainer');
                const imagePreview = document.getElementById('imagePreview');
                imagePreview.src = event.target.result;
                previewContainer.style.display = 'block';
            };
            reader.readAsDataURL(file);
        }
    });

    document.getElementById('genogramForm').addEventListener('submit', function(e) {
        e.preventDefault();
        const formData = new FormData();
        const fileField = document.getElementById('genogramFile');
        
        if (fileField.files[0]) {
            formData.append('genogram', fileField.files[0]);
            
            fetch('/upload-genogram', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert('Genograma subido correctamente');
                } else {
                    alert('Error al subir el genograma: ' + data.message);
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('Error al subir el genograma');
            });
        }
    });
</script>
    <script>
    // Contrase침a establecida (춰No lo hagas en producci칩n!)
    const PASSWORD = "nasa3866";

    function verificarPassword() {
        let intentos = 1;

        while (intentos > 0) {
            let claveIngresada = prompt("Ingrese la contrase침a:");

            if (claveIngresada === PASSWORD) {
                localStorage.setItem("accesoPermitido", "true"); // Guarda el acceso
                alert("Acceso concedido");
                return;
            } else {
                intentos--;
                alert(`Contrase침a incorrecta. Intentos restantes: ${intentos}`);
            }
        }

        alert("Acceso denegado");
        window.location.href = "https://google.com"; // Redirigir si falla
    }

    // Verificar si ya ingres칩 la contrase침a antes
    if (localStorage.getItem("accesoPermitido") !== "true") {
        verificarPassword();
    }
</script>


<footer class="footer">
  <img src="yo.png" alt="Avatar estilo Simpson" width="100" height="100">
  <div>
    Powered by E.U Hernando Gayoso Navarrete.<br>
    <a href="mailto:nanox21@gmail.com" target="_blank">游닏 Contacto</a>
  </div>
</footer>
<style>.footer {
  background-color: #000;
  color: #fff;
  text-align: center;
  padding: 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
}

.footer img {
  width: 100px;
  height: 100px;
  border-radius: 12px;
}

.footer a {
  color: #fff;
  text-decoration: underline;
}</style>
</footer>
</body>
</html>
